<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divine Battle | Shubham vs Shivani</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; background: #0b1120; min-height: 100vh; margin: 0; overflow: hidden; color: #e2e8f0; }
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .cell-hover:hover { background: rgba(255, 255, 255, 0.08); transform: translateY(-3px); }
        .win-highlight { background: rgba(249, 115, 22, 0.25) !important; border-color: #f59e0b !important; box-shadow: 0 0 25px rgba(245, 158, 11, 0.4); }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: scale(0.95); } to { opacity: 1; transform: scale(1); } }
        .symbol-glow-om { text-shadow: 0 0 15px rgba(249, 115, 22, 0.6); }
        .symbol-glow-trishul { text-shadow: 0 0 15px rgba(234, 179, 8, 0.6); }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div id="setup-overlay" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-[#0b1120] transition-all duration-700">
        <div class="text-center mb-10 fade-in">
            <h2 class="text-3xl font-light tracking-[0.3em] text-orange-200 uppercase mb-2">Divine Selection</h2>
            <p class="text-slate-500 text-sm">Choose who shall lead the first move</p>
        </div>
        
        <div class="flex flex-col gap-6 w-full max-w-sm px-6 fade-in" style="animation-delay: 0.2s;">
            <button onclick="setupGame('Shubham')" class="group relative flex items-center justify-between px-8 py-6 glass rounded-3xl hover:border-orange-500/50 transition-all overflow-hidden active:scale-95">
                <div class="absolute inset-0 bg-gradient-to-r from-orange-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div class="text-left">
                    <span class="block text-[10px] tracking-widest text-slate-500 mb-1 uppercase">Warrior One</span>
                    <span class="text-2xl font-semibold text-white tracking-wide">SHUBHAM</span>
                </div>
                <div class="text-4xl text-orange-500 symbol-glow-om group-hover:scale-110 transition-transform">‡•ê</div>
            </button>

            <button onclick="setupGame('Shivani')" class="group relative flex items-center justify-between px-8 py-6 glass rounded-3xl hover:border-yellow-500/50 transition-all overflow-hidden active:scale-95">
                <div class="absolute inset-0 bg-gradient-to-r from-yellow-600/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"></div>
                <div class="text-left">
                    <span class="block text-[10px] tracking-widest text-slate-500 mb-1 uppercase">Warrior Two</span>
                    <span class="text-2xl font-semibold text-white tracking-wide">SHIVANI</span>
                </div>
                <div class="text-4xl text-yellow-500 symbol-glow-trishul group-hover:scale-110 transition-transform">üî±</div>
            </button>
        </div>

        <div class="mt-12 text-slate-600 text-[10px] tracking-[0.5em] uppercase">The Battle Awaits</div>
    </div>

    <div id="main-container" class="max-w-md w-full relative">
        <div class="flex justify-between items-end mb-10 px-2">
            <div class="text-center">
                <p class="text-[10px] text-slate-500 uppercase tracking-widest mb-1">Shubham (‡•ê)</p>
                <div id="score-shubham" class="text-4xl font-light text-orange-500">0</div>
            </div>
            <div class="text-center pb-1">
                <h1 class="text-xl font-bold tracking-widest bg-gradient-to-b from-white to-slate-500 bg-clip-text text-transparent uppercase">Battlefield</h1>
                <div id="status-container" class="flex items-center justify-center gap-2 mt-1">
                    <span id="player-indicator" class="w-2 h-2 rounded-full bg-orange-500 transition-colors duration-500"></span>
                    <p id="status" class="text-[10px] text-slate-400 uppercase tracking-widest font-bold">Waiting...</p>
                </div>
            </div>
            <div class="text-center">
                <p class="text-[10px] text-slate-500 uppercase tracking-widest mb-1">Shivani (üî±)</p>
                <div id="score-shivani" class="text-4xl font-light text-yellow-500">0</div>
            </div>
        </div>

        <div id="board" class="grid grid-cols-3 gap-4 glass p-6 rounded-[2.5rem] shadow-2xl opacity-40 pointer-events-none transition-all duration-700">
            </div>

        <div id="result-screen" class="hidden absolute inset-0 flex flex-col items-center justify-center glass rounded-[2.5rem] z-10 fade-in">
            <p id="winner-label" class="text-orange-200 text-xs tracking-[0.4em] uppercase mb-2">Match Result</p>
            <h2 id="winner-text" class="text-4xl font-bold mb-8 text-white text-center px-4 drop-shadow-lg"></h2>
            <button onclick="resetBoardOnly()" class="px-10 py-3 bg-white text-slate-900 font-bold rounded-2xl transition-all hover:bg-orange-500 hover:text-white shadow-xl active:scale-95">
                Next Round
            </button>
        </div>

        <div class="mt-12 flex flex-col items-center gap-4">
            <button onclick="hardReset()" class="text-[10px] text-slate-600 hover:text-red-400 uppercase tracking-[0.2em] transition-colors font-semibold">
                Reset All Records
            </button>
        </div>
    </div>

    <script>
        let currentPlayer = ''; 
        let currentSymbol = ''; 
        let gameState = ["", "", "", "", "", "", "", "", ""];
        let gameActive = false;
        let scores = { 'Shubham': 0, 'Shivani': 0 };

        const boardElement = document.getElementById('board');
        const statusDisplay = document.getElementById('status');
        const setupOverlay = document.getElementById('setup-overlay');

        const winningConditions = [
            [0, 1, 2], [3, 4, 5], [6, 7, 8],
            [0, 3, 6], [1, 4, 7], [2, 5, 8],
            [0, 4, 8], [2, 4, 6]
        ];

        function setupGame(name) {
            currentPlayer = name;
            currentSymbol = (name === 'Shubham') ? '‡•ê' : 'üî±';
            
            setupOverlay.classList.add('opacity-0', 'pointer-events-none');
            setTimeout(() => {
                setupOverlay.classList.add('hidden');
                startGame();
            }, 700);
        }

        function startGame() {
            gameActive = true;
            boardElement.classList.remove('opacity-40', 'pointer-events-none');
            updateStatus();
            createBoard();
        }

        function createBoard() {
            boardElement.innerHTML = '';
            gameState.forEach((cell, index) => {
                const cellElement = document.createElement('div');
                cellElement.className = 'h-24 glass rounded-3xl flex items-center justify-center text-5xl cursor-pointer transition-all cell-hover select-none';
                cellElement.setAttribute('data-index', index);
                cellElement.innerText = cell;
                if(cell === '‡•ê') cellElement.classList.add('text-orange-500', 'symbol-glow-om');
                if(cell === 'üî±') cellElement.classList.add('text-yellow-500', 'symbol-glow-trishul');
                cellElement.addEventListener('click', handleCellClick);
                boardElement.appendChild(cellElement);
            });
        }

        function handleCellClick(e) {
            const index = e.currentTarget.getAttribute('data-index');
            if (gameState[index] !== "" || !gameActive) return;

            gameState[index] = currentSymbol;
            e.currentTarget.innerText = currentSymbol;
            e.currentTarget.classList.add(currentSymbol === '‡•ê' ? 'text-orange-500' : 'text-yellow-500');
            if(currentSymbol === '‡•ê') e.currentTarget.classList.add('symbol-glow-om');
            else e.currentTarget.classList.add('symbol-glow-trishul');

            checkResult();
        }

        function updateStatus() {
            statusDisplay.innerText = `${currentPlayer}'s Move`;
            const indicatorDot = document.getElementById('player-indicator');
            indicatorDot.style.backgroundColor = currentSymbol === '‡•ê' ? '#f97316' : '#eab308';
        }

        function checkResult() {
            let roundWon = false;
            let winningLine = [];

            for (let i = 0; i < winningConditions.length; i++) {
                const [a, b, c] = winningConditions[i];
                if (gameState[a] && gameState[a] === gameState[b] && gameState[a] === gameState[c]) {
                    roundWon = true;
                    winningLine = [a, b, c];
                    break;
                }
            }

            if (roundWon) {
                scores[currentPlayer]++;
                updateScoreboard();
                document.getElementById('winner-text').innerText = `${currentPlayer} Wins!`;
                winningLine.forEach(idx => boardElement.children[idx].classList.add('win-highlight'));
                endGame();
                return;
            }

            if (!gameState.includes("")) {
                document.getElementById('winner-text').innerText = "Draw!";
                endGame();
                return;
            }

            currentPlayer = (currentPlayer === 'Shubham') ? 'Shivani' : 'Shubham';
            currentSymbol = (currentPlayer === 'Shubham') ? '‡•ê' : 'üî±';
            updateStatus();
        }

        function updateScoreboard() {
            document.getElementById('score-shubham').innerText = scores['Shubham'];
            document.getElementById('score-shivani').innerText = scores['Shivani'];
        }

        function endGame() {
            gameActive = false;
            setTimeout(() => {
                document.getElementById('result-screen').classList.remove('hidden');
            }, 600);
        }

        function resetBoardOnly() {
            gameState = ["", "", "", "", "", "", "", "", ""];
            gameActive = true;
            document.getElementById('result-screen').classList.add('hidden');
            createBoard();
            updateStatus();
        }

        function hardReset() {
            scores = { 'Shubham': 0, 'Shivani': 0 };
            updateScoreboard();
            gameState = ["", "", "", "", "", "", "", "", ""];
            setupOverlay.classList.remove('hidden', 'opacity-0', 'pointer-events-none');
            document.getElementById('result-screen').classList.add('hidden');
            boardElement.classList.add('opacity-40', 'pointer-events-none');
            createBoard();
        }

        createBoard();
    </script>
</body>
</html>
